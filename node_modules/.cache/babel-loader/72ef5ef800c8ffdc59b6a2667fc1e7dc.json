{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _clickableComponent = require('../clickable-component.js');\n\nvar _clickableComponent2 = _interopRequireDefault(_clickableComponent);\n\nvar _component = require('../component.js');\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _menu = require('./menu.js');\n\nvar _menu2 = _interopRequireDefault(_menu);\n\nvar _dom = require('../utils/dom.js');\n\nvar Dom = _interopRequireWildcard(_dom);\n\nvar _fn = require('../utils/fn.js');\n\nvar Fn = _interopRequireWildcard(_fn);\n\nvar _toTitleCase = require('../utils/to-title-case.js');\n\nvar _toTitleCase2 = _interopRequireDefault(_toTitleCase);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj['default'] = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/**\n * @file menu-button.js\n */\n\n/**\n * A `MenuButton` class for any popup {@link Menu}.\n *\n * @extends ClickableComponent\n */\n\n\nvar MenuButton = function (_ClickableComponent) {\n  _inherits(MenuButton, _ClickableComponent);\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of player options.\n   */\n\n\n  function MenuButton(player) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, MenuButton);\n\n    var _this = _possibleConstructorReturn(this, _ClickableComponent.call(this, player, options));\n\n    _this.update();\n\n    _this.enabled_ = true;\n\n    _this.el_.setAttribute('aria-haspopup', 'true');\n\n    _this.el_.setAttribute('role', 'menuitem');\n\n    _this.on('keydown', _this.handleSubmenuKeyPress);\n\n    return _this;\n  }\n  /**\n   * Update the menu based on the current state of its items.\n   */\n\n\n  MenuButton.prototype.update = function update() {\n    var menu = this.createMenu();\n\n    if (this.menu) {\n      this.removeChild(this.menu);\n    }\n\n    this.menu = menu;\n    this.addChild(menu);\n    /**\n     * Track the state of the menu button\n     *\n     * @type {Boolean}\n     * @private\n     */\n\n    this.buttonPressed_ = false;\n    this.el_.setAttribute('aria-expanded', 'false');\n\n    if (this.items && this.items.length <= this.hideThreshold_) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  };\n  /**\n   * Create the menu and add all items to it.\n   *\n   * @return {Menu}\n   *         The constructed menu\n   */\n\n\n  MenuButton.prototype.createMenu = function createMenu() {\n    var menu = new _menu2['default'](this.player_);\n    /**\n     * Hide the menu if the number of items is less than or equal to this threshold. This defaults\n     * to 0 and whenever we add items which can be hidden to the menu we'll increment it. We list\n     * it here because every time we run `createMenu` we need to reset the value.\n     *\n     * @protected\n     * @type {Number}\n     */\n\n    this.hideThreshold_ = 0; // Add a title list item to the top\n\n    if (this.options_.title) {\n      var title = Dom.createEl('li', {\n        className: 'vjs-menu-title',\n        innerHTML: (0, _toTitleCase2['default'])(this.options_.title),\n        tabIndex: -1\n      });\n      this.hideThreshold_ += 1;\n      menu.children_.unshift(title);\n      Dom.insertElFirst(title, menu.contentEl());\n    }\n\n    this.items = this.createItems();\n\n    if (this.items) {\n      // Add menu items to the menu\n      for (var i = 0; i < this.items.length; i++) {\n        menu.addItem(this.items[i]);\n      }\n    }\n\n    return menu;\n  };\n  /**\n   * Create the list of menu items. Specific to each subclass.\n   *\n   * @abstract\n   */\n\n\n  MenuButton.prototype.createItems = function createItems() {};\n  /**\n   * Create the `MenuButtons`s DOM element.\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n\n\n  MenuButton.prototype.createEl = function createEl() {\n    return _ClickableComponent.prototype.createEl.call(this, 'div', {\n      className: this.buildCSSClass()\n    });\n  };\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  MenuButton.prototype.buildCSSClass = function buildCSSClass() {\n    var menuButtonClass = 'vjs-menu-button'; // If the inline option is passed, we want to use different styles altogether.\n\n    if (this.options_.inline === true) {\n      menuButtonClass += '-inline';\n    } else {\n      menuButtonClass += '-popup';\n    }\n\n    return 'vjs-menu-button ' + menuButtonClass + ' ' + _ClickableComponent.prototype.buildCSSClass.call(this);\n  };\n  /**\n   * Handle a click on a `MenuButton`.\n   * See {@link ClickableComponent#handleClick} for instances where this is called.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  MenuButton.prototype.handleClick = function handleClick(event) {\n    // When you click the button it adds focus, which will show the menu.\n    // So we'll remove focus when the mouse leaves the button. Focus is needed\n    // for tab navigation.\n    this.one(this.menu.contentEl(), 'mouseleave', Fn.bind(this, function (e) {\n      this.unpressButton();\n      this.el_.blur();\n    }));\n\n    if (this.buttonPressed_) {\n      this.unpressButton();\n    } else {\n      this.pressButton();\n    }\n  };\n  /**\n   * Handle tab, escape, down arrow, and up arrow keys for `MenuButton`. See\n   * {@link ClickableComponent#handleKeyPress} for instances where this is called.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown` event that caused this function to be called.\n   *\n   * @listens keydown\n   */\n\n\n  MenuButton.prototype.handleKeyPress = function handleKeyPress(event) {\n    // Escape (27) key or Tab (9) key unpress the 'button'\n    if (event.which === 27 || event.which === 9) {\n      if (this.buttonPressed_) {\n        this.unpressButton();\n      } // Don't preventDefault for Tab key - we still want to lose focus\n\n\n      if (event.which !== 9) {\n        event.preventDefault();\n      } // Up (38) key or Down (40) key press the 'button'\n\n    } else if (event.which === 38 || event.which === 40) {\n      if (!this.buttonPressed_) {\n        this.pressButton();\n        event.preventDefault();\n      }\n    } else {\n      _ClickableComponent.prototype.handleKeyPress.call(this, event);\n    }\n  };\n  /**\n   * Handle a `keydown` event on a sub-menu. The listener for this is added in\n   * the constructor.\n   *\n   * @param {EventTarget~Event} event\n   *        Key press event\n   *\n   * @listens keydown\n   */\n\n\n  MenuButton.prototype.handleSubmenuKeyPress = function handleSubmenuKeyPress(event) {\n    // Escape (27) key or Tab (9) key unpress the 'button'\n    if (event.which === 27 || event.which === 9) {\n      if (this.buttonPressed_) {\n        this.unpressButton();\n      } // Don't preventDefault for Tab key - we still want to lose focus\n\n\n      if (event.which !== 9) {\n        event.preventDefault();\n      }\n    }\n  };\n  /**\n   * Put the current `MenuButton` into a pressed state.\n   */\n\n\n  MenuButton.prototype.pressButton = function pressButton() {\n    if (this.enabled_) {\n      this.buttonPressed_ = true;\n      this.menu.lockShowing();\n      this.el_.setAttribute('aria-expanded', 'true'); // set the focus into the submenu\n\n      this.menu.focus();\n    }\n  };\n  /**\n   * Take the current `MenuButton` out of a pressed state.\n   */\n\n\n  MenuButton.prototype.unpressButton = function unpressButton() {\n    if (this.enabled_) {\n      this.buttonPressed_ = false;\n      this.menu.unlockShowing();\n      this.el_.setAttribute('aria-expanded', 'false'); // Set focus back to this menu button\n\n      this.el_.focus();\n    }\n  };\n  /**\n   * Disable the `MenuButton`. Don't allow it to be clicked.\n   *\n   * @return {MenuButton}\n   *         Returns itself; method can be chained.\n   */\n\n\n  MenuButton.prototype.disable = function disable() {\n    // Unpress, but don't force focus on this button\n    this.buttonPressed_ = false;\n    this.menu.unlockShowing();\n    this.el_.setAttribute('aria-expanded', 'false');\n    this.enabled_ = false;\n    return _ClickableComponent.prototype.disable.call(this);\n  };\n  /**\n   * Enable the `MenuButton`. Allow it to be clicked.\n   *\n   * @return {MenuButton}\n   *         Returns itself; method can be chained.\n   */\n\n\n  MenuButton.prototype.enable = function enable() {\n    this.enabled_ = true;\n    return _ClickableComponent.prototype.enable.call(this);\n  };\n\n  return MenuButton;\n}(_clickableComponent2['default']);\n\n_component2['default'].registerComponent('MenuButton', MenuButton);\n\nexports['default'] = MenuButton;","map":{"version":3,"sources":["C:/test_website/ninjasatnoon/node_modules/video.js/es5/menu/menu-button.js"],"names":["exports","__esModule","_clickableComponent","require","_clickableComponent2","_interopRequireDefault","_component","_component2","_menu","_menu2","_dom","Dom","_interopRequireWildcard","_fn","Fn","_toTitleCase","_toTitleCase2","obj","newObj","key","Object","prototype","hasOwnProperty","call","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","MenuButton","_ClickableComponent","player","options","arguments","length","undefined","_this","update","enabled_","el_","setAttribute","on","handleSubmenuKeyPress","menu","createMenu","removeChild","addChild","buttonPressed_","items","hideThreshold_","hide","show","player_","options_","title","createEl","className","innerHTML","tabIndex","children_","unshift","insertElFirst","contentEl","createItems","i","addItem","buildCSSClass","menuButtonClass","inline","handleClick","event","one","bind","e","unpressButton","blur","pressButton","handleKeyPress","which","preventDefault","lockShowing","focus","unlockShowing","disable","enable","registerComponent"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _clickableComponent = require('../clickable-component.js');\n\nvar _clickableComponent2 = _interopRequireDefault(_clickableComponent);\n\nvar _component = require('../component.js');\n\nvar _component2 = _interopRequireDefault(_component);\n\nvar _menu = require('./menu.js');\n\nvar _menu2 = _interopRequireDefault(_menu);\n\nvar _dom = require('../utils/dom.js');\n\nvar Dom = _interopRequireWildcard(_dom);\n\nvar _fn = require('../utils/fn.js');\n\nvar Fn = _interopRequireWildcard(_fn);\n\nvar _toTitleCase = require('../utils/to-title-case.js');\n\nvar _toTitleCase2 = _interopRequireDefault(_toTitleCase);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file menu-button.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\n/**\n * A `MenuButton` class for any popup {@link Menu}.\n *\n * @extends ClickableComponent\n */\nvar MenuButton = function (_ClickableComponent) {\n  _inherits(MenuButton, _ClickableComponent);\n\n  /**\n   * Creates an instance of this class.\n   *\n   * @param {Player} player\n   *        The `Player` that this class should be attached to.\n   *\n   * @param {Object} [options={}]\n   *        The key/value store of player options.\n   */\n  function MenuButton(player) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    _classCallCheck(this, MenuButton);\n\n    var _this = _possibleConstructorReturn(this, _ClickableComponent.call(this, player, options));\n\n    _this.update();\n\n    _this.enabled_ = true;\n\n    _this.el_.setAttribute('aria-haspopup', 'true');\n    _this.el_.setAttribute('role', 'menuitem');\n    _this.on('keydown', _this.handleSubmenuKeyPress);\n    return _this;\n  }\n\n  /**\n   * Update the menu based on the current state of its items.\n   */\n\n\n  MenuButton.prototype.update = function update() {\n    var menu = this.createMenu();\n\n    if (this.menu) {\n      this.removeChild(this.menu);\n    }\n\n    this.menu = menu;\n    this.addChild(menu);\n\n    /**\n     * Track the state of the menu button\n     *\n     * @type {Boolean}\n     * @private\n     */\n    this.buttonPressed_ = false;\n    this.el_.setAttribute('aria-expanded', 'false');\n\n    if (this.items && this.items.length <= this.hideThreshold_) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  };\n\n  /**\n   * Create the menu and add all items to it.\n   *\n   * @return {Menu}\n   *         The constructed menu\n   */\n\n\n  MenuButton.prototype.createMenu = function createMenu() {\n    var menu = new _menu2['default'](this.player_);\n\n    /**\n     * Hide the menu if the number of items is less than or equal to this threshold. This defaults\n     * to 0 and whenever we add items which can be hidden to the menu we'll increment it. We list\n     * it here because every time we run `createMenu` we need to reset the value.\n     *\n     * @protected\n     * @type {Number}\n     */\n    this.hideThreshold_ = 0;\n\n    // Add a title list item to the top\n    if (this.options_.title) {\n      var title = Dom.createEl('li', {\n        className: 'vjs-menu-title',\n        innerHTML: (0, _toTitleCase2['default'])(this.options_.title),\n        tabIndex: -1\n      });\n\n      this.hideThreshold_ += 1;\n\n      menu.children_.unshift(title);\n      Dom.insertElFirst(title, menu.contentEl());\n    }\n\n    this.items = this.createItems();\n\n    if (this.items) {\n      // Add menu items to the menu\n      for (var i = 0; i < this.items.length; i++) {\n        menu.addItem(this.items[i]);\n      }\n    }\n\n    return menu;\n  };\n\n  /**\n   * Create the list of menu items. Specific to each subclass.\n   *\n   * @abstract\n   */\n\n\n  MenuButton.prototype.createItems = function createItems() {};\n\n  /**\n   * Create the `MenuButtons`s DOM element.\n   *\n   * @return {Element}\n   *         The element that gets created.\n   */\n\n\n  MenuButton.prototype.createEl = function createEl() {\n    return _ClickableComponent.prototype.createEl.call(this, 'div', {\n      className: this.buildCSSClass()\n    });\n  };\n\n  /**\n   * Builds the default DOM `className`.\n   *\n   * @return {string}\n   *         The DOM `className` for this object.\n   */\n\n\n  MenuButton.prototype.buildCSSClass = function buildCSSClass() {\n    var menuButtonClass = 'vjs-menu-button';\n\n    // If the inline option is passed, we want to use different styles altogether.\n    if (this.options_.inline === true) {\n      menuButtonClass += '-inline';\n    } else {\n      menuButtonClass += '-popup';\n    }\n\n    return 'vjs-menu-button ' + menuButtonClass + ' ' + _ClickableComponent.prototype.buildCSSClass.call(this);\n  };\n\n  /**\n   * Handle a click on a `MenuButton`.\n   * See {@link ClickableComponent#handleClick} for instances where this is called.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown`, `tap`, or `click` event that caused this function to be\n   *        called.\n   *\n   * @listens tap\n   * @listens click\n   */\n\n\n  MenuButton.prototype.handleClick = function handleClick(event) {\n    // When you click the button it adds focus, which will show the menu.\n    // So we'll remove focus when the mouse leaves the button. Focus is needed\n    // for tab navigation.\n\n    this.one(this.menu.contentEl(), 'mouseleave', Fn.bind(this, function (e) {\n      this.unpressButton();\n      this.el_.blur();\n    }));\n    if (this.buttonPressed_) {\n      this.unpressButton();\n    } else {\n      this.pressButton();\n    }\n  };\n\n  /**\n   * Handle tab, escape, down arrow, and up arrow keys for `MenuButton`. See\n   * {@link ClickableComponent#handleKeyPress} for instances where this is called.\n   *\n   * @param {EventTarget~Event} event\n   *        The `keydown` event that caused this function to be called.\n   *\n   * @listens keydown\n   */\n\n\n  MenuButton.prototype.handleKeyPress = function handleKeyPress(event) {\n\n    // Escape (27) key or Tab (9) key unpress the 'button'\n    if (event.which === 27 || event.which === 9) {\n      if (this.buttonPressed_) {\n        this.unpressButton();\n      }\n      // Don't preventDefault for Tab key - we still want to lose focus\n      if (event.which !== 9) {\n        event.preventDefault();\n      }\n      // Up (38) key or Down (40) key press the 'button'\n    } else if (event.which === 38 || event.which === 40) {\n      if (!this.buttonPressed_) {\n        this.pressButton();\n        event.preventDefault();\n      }\n    } else {\n      _ClickableComponent.prototype.handleKeyPress.call(this, event);\n    }\n  };\n\n  /**\n   * Handle a `keydown` event on a sub-menu. The listener for this is added in\n   * the constructor.\n   *\n   * @param {EventTarget~Event} event\n   *        Key press event\n   *\n   * @listens keydown\n   */\n\n\n  MenuButton.prototype.handleSubmenuKeyPress = function handleSubmenuKeyPress(event) {\n\n    // Escape (27) key or Tab (9) key unpress the 'button'\n    if (event.which === 27 || event.which === 9) {\n      if (this.buttonPressed_) {\n        this.unpressButton();\n      }\n      // Don't preventDefault for Tab key - we still want to lose focus\n      if (event.which !== 9) {\n        event.preventDefault();\n      }\n    }\n  };\n\n  /**\n   * Put the current `MenuButton` into a pressed state.\n   */\n\n\n  MenuButton.prototype.pressButton = function pressButton() {\n    if (this.enabled_) {\n      this.buttonPressed_ = true;\n      this.menu.lockShowing();\n      this.el_.setAttribute('aria-expanded', 'true');\n      // set the focus into the submenu\n      this.menu.focus();\n    }\n  };\n\n  /**\n   * Take the current `MenuButton` out of a pressed state.\n   */\n\n\n  MenuButton.prototype.unpressButton = function unpressButton() {\n    if (this.enabled_) {\n      this.buttonPressed_ = false;\n      this.menu.unlockShowing();\n      this.el_.setAttribute('aria-expanded', 'false');\n      // Set focus back to this menu button\n      this.el_.focus();\n    }\n  };\n\n  /**\n   * Disable the `MenuButton`. Don't allow it to be clicked.\n   *\n   * @return {MenuButton}\n   *         Returns itself; method can be chained.\n   */\n\n\n  MenuButton.prototype.disable = function disable() {\n    // Unpress, but don't force focus on this button\n    this.buttonPressed_ = false;\n    this.menu.unlockShowing();\n    this.el_.setAttribute('aria-expanded', 'false');\n\n    this.enabled_ = false;\n\n    return _ClickableComponent.prototype.disable.call(this);\n  };\n\n  /**\n   * Enable the `MenuButton`. Allow it to be clicked.\n   *\n   * @return {MenuButton}\n   *         Returns itself; method can be chained.\n   */\n\n\n  MenuButton.prototype.enable = function enable() {\n    this.enabled_ = true;\n\n    return _ClickableComponent.prototype.enable.call(this);\n  };\n\n  return MenuButton;\n}(_clickableComponent2['default']);\n\n_component2['default'].registerComponent('MenuButton', MenuButton);\nexports['default'] = MenuButton;\n"]},"metadata":{},"sourceType":"script"}