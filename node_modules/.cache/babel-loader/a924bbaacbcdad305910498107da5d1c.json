{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _textTrackCueList = require('./text-track-cue-list');\n\nvar _textTrackCueList2 = _interopRequireDefault(_textTrackCueList);\n\nvar _fn = require('../utils/fn.js');\n\nvar Fn = _interopRequireWildcard(_fn);\n\nvar _trackEnums = require('./track-enums');\n\nvar _log = require('../utils/log.js');\n\nvar _log2 = _interopRequireDefault(_log);\n\nvar _window = require('global/window');\n\nvar _window2 = _interopRequireDefault(_window);\n\nvar _track = require('./track.js');\n\nvar _track2 = _interopRequireDefault(_track);\n\nvar _url = require('../utils/url.js');\n\nvar _xhr = require('xhr');\n\nvar _xhr2 = _interopRequireDefault(_xhr);\n\nvar _mergeOptions = require('../utils/merge-options');\n\nvar _mergeOptions2 = _interopRequireDefault(_mergeOptions);\n\nvar _browser = require('../utils/browser.js');\n\nvar browser = _interopRequireWildcard(_browser);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj['default'] = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    'default': obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/**\n * @file text-track.js\n */\n\n/**\n * Takes a webvtt file contents and parses it into cues\n *\n * @param {string} srcContent\n *        webVTT file contents\n *\n * @param {TextTrack} track\n *        TextTrack to add cues to. Cues come from the srcContent.\n *\n * @private\n */\n\n\nvar parseCues = function parseCues(srcContent, track) {\n  var parser = new _window2['default'].WebVTT.Parser(_window2['default'], _window2['default'].vttjs, _window2['default'].WebVTT.StringDecoder());\n  var errors = [];\n\n  parser.oncue = function (cue) {\n    track.addCue(cue);\n  };\n\n  parser.onparsingerror = function (error) {\n    errors.push(error);\n  };\n\n  parser.onflush = function () {\n    track.trigger({\n      type: 'loadeddata',\n      target: track\n    });\n  };\n\n  parser.parse(srcContent);\n\n  if (errors.length > 0) {\n    if (_window2['default'].console && _window2['default'].console.groupCollapsed) {\n      _window2['default'].console.groupCollapsed('Text Track parsing errors for ' + track.src);\n    }\n\n    errors.forEach(function (error) {\n      return _log2['default'].error(error);\n    });\n\n    if (_window2['default'].console && _window2['default'].console.groupEnd) {\n      _window2['default'].console.groupEnd();\n    }\n  }\n\n  parser.flush();\n};\n/**\n * Load a `TextTrack` from a specifed url.\n *\n * @param {string} src\n *        Url to load track from.\n *\n * @param {TextTrack} track\n *        Track to add cues to. Comes from the content at the end of `url`.\n *\n * @private\n */\n\n\nvar loadTrack = function loadTrack(src, track) {\n  var opts = {\n    uri: src\n  };\n  var crossOrigin = (0, _url.isCrossOrigin)(src);\n\n  if (crossOrigin) {\n    opts.cors = crossOrigin;\n  }\n\n  (0, _xhr2['default'])(opts, Fn.bind(this, function (err, response, responseBody) {\n    if (err) {\n      return _log2['default'].error(err, response);\n    }\n\n    track.loaded_ = true; // Make sure that vttjs has loaded, otherwise, wait till it finished loading\n    // NOTE: this is only used for the alt/video.novtt.js build\n\n    if (typeof _window2['default'].WebVTT !== 'function') {\n      if (track.tech_) {\n        var loadHandler = function loadHandler() {\n          return parseCues(responseBody, track);\n        };\n\n        track.tech_.on('vttjsloaded', loadHandler);\n        track.tech_.on('vttjserror', function () {\n          _log2['default'].error('vttjs failed to load, stopping trying to process ' + track.src);\n\n          track.tech_.off('vttjsloaded', loadHandler);\n        });\n      }\n    } else {\n      parseCues(responseBody, track);\n    }\n  }));\n};\n/**\n * A representation of a single `TextTrack`.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttrack}\n * @extends Track\n */\n\n\nvar TextTrack = function (_Track) {\n  _inherits(TextTrack, _Track);\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Object} options={}\n   *        Object of option names and values\n   *\n   * @param {Tech} options.tech\n   *        A reference to the tech that owns this TextTrack.\n   *\n   * @param {TextTrack~Kind} [options.kind='subtitles']\n   *        A valid text track kind.\n   *\n   * @param {TextTrack~Mode} [options.mode='disabled']\n   *        A valid text track mode.\n   *\n   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]\n   *        A unique id for this TextTrack.\n   *\n   * @param {string} [options.label='']\n   *        The menu label for this track.\n   *\n   * @param {string} [options.language='']\n   *        A valid two character language code.\n   *\n   * @param {string} [options.srclang='']\n   *        A valid two character language code. An alternative, but deprioritized\n   *        vesion of `options.language`\n   *\n   * @param {string} [options.src]\n   *        A url to TextTrack cues.\n   *\n   * @param {boolean} [options.default]\n   *        If this track should default to on or off.\n   */\n\n\n  function TextTrack() {\n    var _this, _ret;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, TextTrack);\n\n    if (!options.tech) {\n      throw new Error('A tech was not provided.');\n    }\n\n    var settings = (0, _mergeOptions2['default'])(options, {\n      kind: _trackEnums.TextTrackKind[options.kind] || 'subtitles',\n      language: options.language || options.srclang || ''\n    });\n    var mode = _trackEnums.TextTrackMode[settings.mode] || 'disabled';\n    var default_ = settings['default'];\n\n    if (settings.kind === 'metadata' || settings.kind === 'chapters') {\n      mode = 'hidden';\n    } // on IE8 this will be a document element\n    // for every other browser this will be a normal object\n\n\n    var tt = (_this = _possibleConstructorReturn(this, _Track.call(this, settings)), _this);\n    tt.tech_ = settings.tech;\n\n    if (browser.IS_IE8) {\n      for (var prop in TextTrack.prototype) {\n        if (prop !== 'constructor') {\n          tt[prop] = TextTrack.prototype[prop];\n        }\n      }\n    }\n\n    tt.cues_ = [];\n    tt.activeCues_ = [];\n    var cues = new _textTrackCueList2['default'](tt.cues_);\n    var activeCues = new _textTrackCueList2['default'](tt.activeCues_);\n    var changed = false;\n    var timeupdateHandler = Fn.bind(tt, function () {\n      // Accessing this.activeCues for the side-effects of updating itself\n      // due to it's nature as a getter function. Do not remove or cues will\n      // stop updating!\n\n      /* eslint-disable no-unused-expressions */\n      this.activeCues;\n      /* eslint-enable no-unused-expressions */\n\n      if (changed) {\n        this.trigger('cuechange');\n        changed = false;\n      }\n    });\n\n    if (mode !== 'disabled') {\n      tt.tech_.ready(function () {\n        tt.tech_.on('timeupdate', timeupdateHandler);\n      }, true);\n    }\n    /**\n     * @member {boolean} default\n     *         If this track was set to be on or off by default. Cannot be changed after\n     *         creation.\n     *\n     * @readonly\n     */\n\n\n    Object.defineProperty(tt, 'default', {\n      get: function get() {\n        return default_;\n      },\n      set: function set() {}\n    });\n    /**\n     * @member {string} mode\n     *         Set the mode of this TextTrack to a valid {@link TextTrack~Mode}. Will\n     *         not be set if setting to an invalid mode.\n     *\n     * @fires TextTrack#modechange\n     */\n\n    Object.defineProperty(tt, 'mode', {\n      get: function get() {\n        return mode;\n      },\n      set: function set(newMode) {\n        var _this2 = this;\n\n        if (!_trackEnums.TextTrackMode[newMode]) {\n          return;\n        }\n\n        mode = newMode;\n\n        if (mode === 'showing') {\n          this.tech_.ready(function () {\n            _this2.tech_.on('timeupdate', timeupdateHandler);\n          }, true);\n        }\n        /**\n         * An event that fires when mode changes on this track. This allows\n         * the TextTrackList that holds this track to act accordingly.\n         *\n         * > Note: This is not part of the spec!\n         *\n         * @event TextTrack#modechange\n         * @type {EventTarget~Event}\n         */\n\n\n        this.trigger('modechange');\n      }\n    });\n    /**\n     * @member {TextTrackCueList} cues\n     *         The text track cue list for this TextTrack.\n     */\n\n    Object.defineProperty(tt, 'cues', {\n      get: function get() {\n        if (!this.loaded_) {\n          return null;\n        }\n\n        return cues;\n      },\n      set: function set() {}\n    });\n    /**\n     * @member {TextTrackCueList} activeCues\n     *         The list text track cues that are currently active for this TextTrack.\n     */\n\n    Object.defineProperty(tt, 'activeCues', {\n      get: function get() {\n        if (!this.loaded_) {\n          return null;\n        } // nothing to do\n\n\n        if (this.cues.length === 0) {\n          return activeCues;\n        }\n\n        var ct = this.tech_.currentTime();\n        var active = [];\n\n        for (var i = 0, l = this.cues.length; i < l; i++) {\n          var cue = this.cues[i];\n\n          if (cue.startTime <= ct && cue.endTime >= ct) {\n            active.push(cue);\n          } else if (cue.startTime === cue.endTime && cue.startTime <= ct && cue.startTime + 0.5 >= ct) {\n            active.push(cue);\n          }\n        }\n\n        changed = false;\n\n        if (active.length !== this.activeCues_.length) {\n          changed = true;\n        } else {\n          for (var _i = 0; _i < active.length; _i++) {\n            if (this.activeCues_.indexOf(active[_i]) === -1) {\n              changed = true;\n            }\n          }\n        }\n\n        this.activeCues_ = active;\n        activeCues.setCues_(this.activeCues_);\n        return activeCues;\n      },\n      set: function set() {}\n    });\n\n    if (settings.src) {\n      tt.src = settings.src;\n      loadTrack(settings.src, tt);\n    } else {\n      tt.loaded_ = true;\n    }\n\n    return _ret = tt, _possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * Add a cue to the internal list of cues.\n   *\n   * @param {TextTrack~Cue} cue\n   *        The cue to add to our internal list\n   */\n\n\n  TextTrack.prototype.addCue = function addCue(originalCue) {\n    var cue = originalCue;\n\n    if (_window2['default'].vttjs && !(originalCue instanceof _window2['default'].vttjs.VTTCue)) {\n      cue = new _window2['default'].vttjs.VTTCue(originalCue.startTime, originalCue.endTime, originalCue.text);\n\n      for (var prop in originalCue) {\n        if (!(prop in cue)) {\n          cue[prop] = originalCue[prop];\n        }\n      } // make sure that `id` is copied over\n\n\n      cue.id = originalCue.id;\n      cue.originalCue_ = originalCue;\n    }\n\n    var tracks = this.tech_.textTracks();\n\n    if (tracks) {\n      for (var i = 0; i < tracks.length; i++) {\n        if (tracks[i] !== this) {\n          tracks[i].removeCue(cue);\n        }\n      }\n    }\n\n    this.cues_.push(cue);\n    this.cues.setCues_(this.cues_);\n  };\n  /**\n   * Remove a cue from our internal list\n   *\n   * @param {TextTrack~Cue} removeCue\n   *        The cue to remove from our internal list\n   */\n\n\n  TextTrack.prototype.removeCue = function removeCue(_removeCue) {\n    var i = this.cues_.length;\n\n    while (i--) {\n      var cue = this.cues_[i];\n\n      if (cue === _removeCue || cue.originalCue_ && cue.originalCue_ === _removeCue) {\n        this.cues_.splice(i, 1);\n        this.cues.setCues_(this.cues_);\n        break;\n      }\n    }\n  };\n\n  return TextTrack;\n}(_track2['default']);\n/**\n * cuechange - One or more cues in the track have become active or stopped being active.\n */\n\n\nTextTrack.prototype.allowedEvents_ = {\n  cuechange: 'cuechange'\n};\nexports['default'] = TextTrack;","map":{"version":3,"sources":["C:/test_website/ninjasatnoon/node_modules/video.js/es5/tracks/text-track.js"],"names":["exports","__esModule","_textTrackCueList","require","_textTrackCueList2","_interopRequireDefault","_fn","Fn","_interopRequireWildcard","_trackEnums","_log","_log2","_window","_window2","_track","_track2","_url","_xhr","_xhr2","_mergeOptions","_mergeOptions2","_browser","browser","obj","newObj","key","Object","prototype","hasOwnProperty","call","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","parseCues","srcContent","track","parser","WebVTT","Parser","vttjs","StringDecoder","errors","oncue","cue","addCue","onparsingerror","error","push","onflush","trigger","type","target","parse","length","console","groupCollapsed","src","forEach","groupEnd","flush","loadTrack","opts","uri","crossOrigin","isCrossOrigin","cors","bind","err","response","responseBody","loaded_","tech_","loadHandler","on","off","TextTrack","_Track","_this","_ret","options","arguments","undefined","tech","Error","settings","kind","TextTrackKind","language","srclang","mode","TextTrackMode","default_","tt","IS_IE8","prop","cues_","activeCues_","cues","activeCues","changed","timeupdateHandler","ready","defineProperty","get","set","newMode","_this2","ct","currentTime","active","i","l","startTime","endTime","_i","indexOf","setCues_","originalCue","VTTCue","text","id","originalCue_","tracks","textTracks","removeCue","_removeCue","splice","allowedEvents_","cuechange"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _textTrackCueList = require('./text-track-cue-list');\n\nvar _textTrackCueList2 = _interopRequireDefault(_textTrackCueList);\n\nvar _fn = require('../utils/fn.js');\n\nvar Fn = _interopRequireWildcard(_fn);\n\nvar _trackEnums = require('./track-enums');\n\nvar _log = require('../utils/log.js');\n\nvar _log2 = _interopRequireDefault(_log);\n\nvar _window = require('global/window');\n\nvar _window2 = _interopRequireDefault(_window);\n\nvar _track = require('./track.js');\n\nvar _track2 = _interopRequireDefault(_track);\n\nvar _url = require('../utils/url.js');\n\nvar _xhr = require('xhr');\n\nvar _xhr2 = _interopRequireDefault(_xhr);\n\nvar _mergeOptions = require('../utils/merge-options');\n\nvar _mergeOptions2 = _interopRequireDefault(_mergeOptions);\n\nvar _browser = require('../utils/browser.js');\n\nvar browser = _interopRequireWildcard(_browser);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * @file text-track.js\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\n/**\n * Takes a webvtt file contents and parses it into cues\n *\n * @param {string} srcContent\n *        webVTT file contents\n *\n * @param {TextTrack} track\n *        TextTrack to add cues to. Cues come from the srcContent.\n *\n * @private\n */\nvar parseCues = function parseCues(srcContent, track) {\n  var parser = new _window2['default'].WebVTT.Parser(_window2['default'], _window2['default'].vttjs, _window2['default'].WebVTT.StringDecoder());\n  var errors = [];\n\n  parser.oncue = function (cue) {\n    track.addCue(cue);\n  };\n\n  parser.onparsingerror = function (error) {\n    errors.push(error);\n  };\n\n  parser.onflush = function () {\n    track.trigger({\n      type: 'loadeddata',\n      target: track\n    });\n  };\n\n  parser.parse(srcContent);\n  if (errors.length > 0) {\n    if (_window2['default'].console && _window2['default'].console.groupCollapsed) {\n      _window2['default'].console.groupCollapsed('Text Track parsing errors for ' + track.src);\n    }\n    errors.forEach(function (error) {\n      return _log2['default'].error(error);\n    });\n    if (_window2['default'].console && _window2['default'].console.groupEnd) {\n      _window2['default'].console.groupEnd();\n    }\n  }\n\n  parser.flush();\n};\n\n/**\n * Load a `TextTrack` from a specifed url.\n *\n * @param {string} src\n *        Url to load track from.\n *\n * @param {TextTrack} track\n *        Track to add cues to. Comes from the content at the end of `url`.\n *\n * @private\n */\nvar loadTrack = function loadTrack(src, track) {\n  var opts = {\n    uri: src\n  };\n  var crossOrigin = (0, _url.isCrossOrigin)(src);\n\n  if (crossOrigin) {\n    opts.cors = crossOrigin;\n  }\n\n  (0, _xhr2['default'])(opts, Fn.bind(this, function (err, response, responseBody) {\n    if (err) {\n      return _log2['default'].error(err, response);\n    }\n\n    track.loaded_ = true;\n\n    // Make sure that vttjs has loaded, otherwise, wait till it finished loading\n    // NOTE: this is only used for the alt/video.novtt.js build\n    if (typeof _window2['default'].WebVTT !== 'function') {\n      if (track.tech_) {\n        var loadHandler = function loadHandler() {\n          return parseCues(responseBody, track);\n        };\n\n        track.tech_.on('vttjsloaded', loadHandler);\n        track.tech_.on('vttjserror', function () {\n          _log2['default'].error('vttjs failed to load, stopping trying to process ' + track.src);\n          track.tech_.off('vttjsloaded', loadHandler);\n        });\n      }\n    } else {\n      parseCues(responseBody, track);\n    }\n  }));\n};\n\n/**\n * A representation of a single `TextTrack`.\n *\n * @see [Spec]{@link https://html.spec.whatwg.org/multipage/embedded-content.html#texttrack}\n * @extends Track\n */\n\nvar TextTrack = function (_Track) {\n  _inherits(TextTrack, _Track);\n\n  /**\n   * Create an instance of this class.\n   *\n   * @param {Object} options={}\n   *        Object of option names and values\n   *\n   * @param {Tech} options.tech\n   *        A reference to the tech that owns this TextTrack.\n   *\n   * @param {TextTrack~Kind} [options.kind='subtitles']\n   *        A valid text track kind.\n   *\n   * @param {TextTrack~Mode} [options.mode='disabled']\n   *        A valid text track mode.\n   *\n   * @param {string} [options.id='vjs_track_' + Guid.newGUID()]\n   *        A unique id for this TextTrack.\n   *\n   * @param {string} [options.label='']\n   *        The menu label for this track.\n   *\n   * @param {string} [options.language='']\n   *        A valid two character language code.\n   *\n   * @param {string} [options.srclang='']\n   *        A valid two character language code. An alternative, but deprioritized\n   *        vesion of `options.language`\n   *\n   * @param {string} [options.src]\n   *        A url to TextTrack cues.\n   *\n   * @param {boolean} [options.default]\n   *        If this track should default to on or off.\n   */\n  function TextTrack() {\n    var _this, _ret;\n\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, TextTrack);\n\n    if (!options.tech) {\n      throw new Error('A tech was not provided.');\n    }\n\n    var settings = (0, _mergeOptions2['default'])(options, {\n      kind: _trackEnums.TextTrackKind[options.kind] || 'subtitles',\n      language: options.language || options.srclang || ''\n    });\n    var mode = _trackEnums.TextTrackMode[settings.mode] || 'disabled';\n    var default_ = settings['default'];\n\n    if (settings.kind === 'metadata' || settings.kind === 'chapters') {\n      mode = 'hidden';\n    }\n    // on IE8 this will be a document element\n    // for every other browser this will be a normal object\n    var tt = (_this = _possibleConstructorReturn(this, _Track.call(this, settings)), _this);\n\n    tt.tech_ = settings.tech;\n\n    if (browser.IS_IE8) {\n      for (var prop in TextTrack.prototype) {\n        if (prop !== 'constructor') {\n          tt[prop] = TextTrack.prototype[prop];\n        }\n      }\n    }\n\n    tt.cues_ = [];\n    tt.activeCues_ = [];\n\n    var cues = new _textTrackCueList2['default'](tt.cues_);\n    var activeCues = new _textTrackCueList2['default'](tt.activeCues_);\n    var changed = false;\n    var timeupdateHandler = Fn.bind(tt, function () {\n\n      // Accessing this.activeCues for the side-effects of updating itself\n      // due to it's nature as a getter function. Do not remove or cues will\n      // stop updating!\n      /* eslint-disable no-unused-expressions */\n      this.activeCues;\n      /* eslint-enable no-unused-expressions */\n      if (changed) {\n        this.trigger('cuechange');\n        changed = false;\n      }\n    });\n\n    if (mode !== 'disabled') {\n      tt.tech_.ready(function () {\n        tt.tech_.on('timeupdate', timeupdateHandler);\n      }, true);\n    }\n\n    /**\n     * @member {boolean} default\n     *         If this track was set to be on or off by default. Cannot be changed after\n     *         creation.\n     *\n     * @readonly\n     */\n    Object.defineProperty(tt, 'default', {\n      get: function get() {\n        return default_;\n      },\n      set: function set() {}\n    });\n\n    /**\n     * @member {string} mode\n     *         Set the mode of this TextTrack to a valid {@link TextTrack~Mode}. Will\n     *         not be set if setting to an invalid mode.\n     *\n     * @fires TextTrack#modechange\n     */\n    Object.defineProperty(tt, 'mode', {\n      get: function get() {\n        return mode;\n      },\n      set: function set(newMode) {\n        var _this2 = this;\n\n        if (!_trackEnums.TextTrackMode[newMode]) {\n          return;\n        }\n        mode = newMode;\n        if (mode === 'showing') {\n          this.tech_.ready(function () {\n            _this2.tech_.on('timeupdate', timeupdateHandler);\n          }, true);\n        }\n        /**\n         * An event that fires when mode changes on this track. This allows\n         * the TextTrackList that holds this track to act accordingly.\n         *\n         * > Note: This is not part of the spec!\n         *\n         * @event TextTrack#modechange\n         * @type {EventTarget~Event}\n         */\n        this.trigger('modechange');\n      }\n    });\n\n    /**\n     * @member {TextTrackCueList} cues\n     *         The text track cue list for this TextTrack.\n     */\n    Object.defineProperty(tt, 'cues', {\n      get: function get() {\n        if (!this.loaded_) {\n          return null;\n        }\n\n        return cues;\n      },\n      set: function set() {}\n    });\n\n    /**\n     * @member {TextTrackCueList} activeCues\n     *         The list text track cues that are currently active for this TextTrack.\n     */\n    Object.defineProperty(tt, 'activeCues', {\n      get: function get() {\n        if (!this.loaded_) {\n          return null;\n        }\n\n        // nothing to do\n        if (this.cues.length === 0) {\n          return activeCues;\n        }\n\n        var ct = this.tech_.currentTime();\n        var active = [];\n\n        for (var i = 0, l = this.cues.length; i < l; i++) {\n          var cue = this.cues[i];\n\n          if (cue.startTime <= ct && cue.endTime >= ct) {\n            active.push(cue);\n          } else if (cue.startTime === cue.endTime && cue.startTime <= ct && cue.startTime + 0.5 >= ct) {\n            active.push(cue);\n          }\n        }\n\n        changed = false;\n\n        if (active.length !== this.activeCues_.length) {\n          changed = true;\n        } else {\n          for (var _i = 0; _i < active.length; _i++) {\n            if (this.activeCues_.indexOf(active[_i]) === -1) {\n              changed = true;\n            }\n          }\n        }\n\n        this.activeCues_ = active;\n        activeCues.setCues_(this.activeCues_);\n\n        return activeCues;\n      },\n      set: function set() {}\n    });\n\n    if (settings.src) {\n      tt.src = settings.src;\n      loadTrack(settings.src, tt);\n    } else {\n      tt.loaded_ = true;\n    }\n\n    return _ret = tt, _possibleConstructorReturn(_this, _ret);\n  }\n\n  /**\n   * Add a cue to the internal list of cues.\n   *\n   * @param {TextTrack~Cue} cue\n   *        The cue to add to our internal list\n   */\n\n\n  TextTrack.prototype.addCue = function addCue(originalCue) {\n    var cue = originalCue;\n\n    if (_window2['default'].vttjs && !(originalCue instanceof _window2['default'].vttjs.VTTCue)) {\n      cue = new _window2['default'].vttjs.VTTCue(originalCue.startTime, originalCue.endTime, originalCue.text);\n\n      for (var prop in originalCue) {\n        if (!(prop in cue)) {\n          cue[prop] = originalCue[prop];\n        }\n      }\n\n      // make sure that `id` is copied over\n      cue.id = originalCue.id;\n      cue.originalCue_ = originalCue;\n    }\n\n    var tracks = this.tech_.textTracks();\n\n    if (tracks) {\n      for (var i = 0; i < tracks.length; i++) {\n        if (tracks[i] !== this) {\n          tracks[i].removeCue(cue);\n        }\n      }\n    }\n\n    this.cues_.push(cue);\n    this.cues.setCues_(this.cues_);\n  };\n\n  /**\n   * Remove a cue from our internal list\n   *\n   * @param {TextTrack~Cue} removeCue\n   *        The cue to remove from our internal list\n   */\n\n\n  TextTrack.prototype.removeCue = function removeCue(_removeCue) {\n    var i = this.cues_.length;\n\n    while (i--) {\n      var cue = this.cues_[i];\n\n      if (cue === _removeCue || cue.originalCue_ && cue.originalCue_ === _removeCue) {\n        this.cues_.splice(i, 1);\n        this.cues.setCues_(this.cues_);\n        break;\n      }\n    }\n  };\n\n  return TextTrack;\n}(_track2['default']);\n\n/**\n * cuechange - One or more cues in the track have become active or stopped being active.\n */\n\n\nTextTrack.prototype.allowedEvents_ = {\n  cuechange: 'cuechange'\n};\n\nexports['default'] = TextTrack;\n"]},"metadata":{},"sourceType":"script"}